<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/white_flower1.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/white_flower1.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/white_flower1.jpg">
  <link rel="mask-icon" href="/images/white_flower1.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Fira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lyk-love.cn","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":"enable","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="在之前的文章中, 我介绍了如何使用Hexo来构建静态站点. Hexo有很多主题, 其中我认为最好看最好用的是Hexo Next theme. 本文介绍如何使用和配置Next theme, 以及如何对Hexo和Next进行多主机同步.">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo Next">
<meta property="og:url" content="http://lyk-love.cn/2022/03/27/Hexo%20Next/index.html">
<meta property="og:site_name" content="LYK-love">
<meta property="og:description" content="在之前的文章中, 我介绍了如何使用Hexo来构建静态站点. Hexo有很多主题, 其中我认为最好看最好用的是Hexo Next theme. 本文介绍如何使用和配置Next theme, 以及如何对Hexo和Next进行多主机同步.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-03-27T02:28:03.000Z">
<meta property="article:modified_time" content="2023-05-08T04:12:50.114Z">
<meta property="article:author" content="LYK-love">
<meta property="article:tag" content="Hexo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://lyk-love.cn/2022/03/27/Hexo%20Next/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://lyk-love.cn/2022/03/27/Hexo%20Next/","path":"2022/03/27/Hexo Next/","title":"Hexo Next"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo Next | LYK-love</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?07a572cad308bc3b22d354fca4209fed"></script>






<link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&display=swap" rel="stylesheet">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="LYK-love" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LYK-love</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Intro"><span class="nav-text">Intro</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Config-File-Features"><span class="nav-text">Config File Features</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Alternate-Theme-Config"><span class="nav-text">Alternate Theme Config</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Next-Doc"><span class="nav-text">Next Doc</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Version"><span class="nav-text">Version</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Installation"><span class="nav-text">Installation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-npm"><span class="nav-text">Using npm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-git"><span class="nav-text">Using git</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#After-Installation"><span class="nav-text">After Installation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Upgrade"><span class="nav-text">Upgrade</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Next-Theme-Config"><span class="nav-text">Next Theme Config</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Configuring-Favicon"><span class="nav-text">Configuring Favicon</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Local-Search"><span class="nav-text">Local Search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Baidu-Analysis"><span class="nav-text">Baidu Analysis</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Math-Support"><span class="nav-text">Math Support</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Engines"><span class="nav-text">Engines</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mathjax"><span class="nav-text">Mathjax</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#KaTex"><span class="nav-text">KaTex</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Support-MathJax"><span class="nav-text">Support MathJax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AC%E5%BC%8F%E8%87%AA%E5%8A%A8%E7%BC%96%E5%8F%B7%E5%92%8C%E5%BC%95%E7%94%A8"><span class="nav-text">公式自动编号和引用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Multi-line-Equations"><span class="nav-text">Multi-line Equations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Multiple-Aligned-Equations"><span class="nav-text">Multiple Aligned Equations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Exclude-Equations-from-Numbering"><span class="nav-text">Exclude Equations from Numbering</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Use-tag-to-Tag-Equations"><span class="nav-text">Use \tag to Tag Equations</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Customization"><span class="nav-text">Customization</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Fonts-Customization"><span class="nav-text">Fonts Customization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Chinese-Font"><span class="nav-text">Chinese Font</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#English-Font"><span class="nav-text">English Font</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Code-Block"><span class="nav-text">Code Block</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Image"><span class="nav-text">Image</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E7%BC%A9%E6%94%BE"><span class="nav-text">图像缩放</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="nav-text">图像懒加载</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E5%AE%A2%E4%BA%BA%E6%95%B0-%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E6%AC%A1%E6%95%B0"><span class="nav-text">访客人数&amp;&amp;文章阅读次数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#back2top-button"><span class="nav-text">back2top button</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Copyright"><span class="nav-text">Copyright</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Synchronize-between-mul-hosts"><span class="nav-text">Synchronize between mul-hosts</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Steps"><span class="nav-text">Steps</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Synchronize-Hexo"><span class="nav-text">Synchronize Hexo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Synchronize-Theme"><span class="nav-text">Synchronize Theme</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Apply-separate-version-control-to-themes"><span class="nav-text">Apply separate version control to themes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Update-submodule"><span class="nav-text">Update submodule</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Add-submodule"><span class="nav-text">Add submodule</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Use-multi-branches-in-Github"><span class="nav-text">Use multi-branches in Github</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E4%B8%8D%E6%83%B3%E7%94%A8%E7%9A%84%E7%BE%8E%E5%8C%96"><span class="nav-text">一些不想用的美化</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LYK-love"
      src="/images/white_flower1.jpg">
  <p class="site-author-name" itemprop="name">LYK-love</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">217</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/LYK-love" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;LYK-love" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:191820133@smail.nju.edu.cn" title="E-Mail → mailto:191820133@smail.nju.edu.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://lyk-love.cn/2022/03/27/Hexo%20Next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/white_flower1.jpg">
      <meta itemprop="name" content="LYK-love">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LYK-love">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Hexo Next | LYK-love">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hexo Next
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-27 02:28:03" itemprop="dateCreated datePublished" datetime="2022-03-27T02:28:03Z">2022-03-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-08 04:12:50" itemprop="dateModified" datetime="2023-05-08T04:12:50Z">2023-05-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Toolkit/" itemprop="url" rel="index"><span itemprop="name">Toolkit</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>在<a href="https://lyk-love.cn/2023/05/05/Hexo/">之前的文章</a>中, 我介绍了如何使用Hexo来构建静态站点. Hexo有很多主题, 其中我认为最好看最好用的是Hexo Next theme. 本文介绍如何使用和配置Next theme, 以及如何对Hexo和Next进行多主机同步.</p>
<span id="more"></span>
<p>Refs:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hexo-next.readthedocs.io/zh_CN/latest">NeXt Tutor</a>, 里面有几乎全部的主题配置教程</li>
<li><a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next">最新版(v8)NeXt Github仓库</a></li>
<li><a target="_blank" rel="noopener" href="https://theme-next.js.org/">Next Official Blog</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/theme-next/awesome-next">Awesome NexT</a> : 有很多别人的Next博客, 非常值得借鉴</li>
</ul>
<h1 id="Intro"><a class="header-anchor" href="#Intro"></a>Intro</h1>
<p>My Dependency Version:</p>
<ul>
<li>
<p>Next Version: 8.15.1</p>
</li>
<li>
<p>Hexo Version:  6.2.0</p>
</li>
<li>
<p>hexo-cli Version: 4.3.0</p>
</li>
</ul>
<p>在本文中, 除非特殊说明, 否则编辑的都是主题配置文件( aka <code>Next _config.yml</code> ), 由于使用了Alternate Theme Config, 因此主题配置文件位置是<code>&lt;hexo&gt;/_cofig.next.yml</code>.</p>
<h1 id="Config-File-Features"><a class="header-anchor" href="#Config-File-Features"></a>Config File Features</h1>
<p>在之前关于<a href="https://lyk-love.cn/2023/05/05/Hexo/">Hexo</a>的文章中, 我说过主题目录(<code>&lt;hexo-dir&gt;/themes/next</code>)和网站目录(<code>&lt;hexo-dir&gt;/</code>)是不同的. 主题的配置文件, 样式文件等, 都在主题目录下, 因此如果想要修改主题的配置, 也需要更改主题目录下的对应文件.</p>
<p>但是, <a href="#Installation">下文</a>会讲到, 主题要么用npm下载, 要么用git下载, 无论哪种方式都会对主题进行版本管理. 我用的是git, 对主题目录下的文件做的更改会在之后<code>git pull</code>时被上游仓库的代码覆盖. 这使得对主题做自定义的配置很麻烦.</p>
<p>为此, Next提供了 <a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/getting-started/configuration.html">Alternate Theme Config</a>,  <a target="_blank" rel="noopener" href="https://hexo.io/docs/data-files">Data Files</a> 和 <a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/advanced-settings/custom-files.html">Custom Files</a> feature, 使得我们可以把Next的配置文件, 样式文件和其他的文件copy到<code>&lt;hexo-dir&gt;/source/_data/</code>(这就是 <a target="_blank" rel="noopener" href="https://hexo.io/docs/data-files">Data Files</a>), 然后修改Data files, 并让用它们来覆盖主题目录下的对应文件(这就是 <a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/advanced-settings/custom-files.html">Custom Files</a>  )被加载.</p>
<p>因此, 所有对主题的变更都会放在网站目录而不是主题目录, 主题目录下的内容不需要做变动, 可以很方便地进行版本管理.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/getting-started/configuration.html">Alternate Theme Config</a>: Next的配置文件可以放在<code>&lt;hexo&gt;/_cofig.next.yml</code>,这会覆盖<code>&lt;hexo-dir&gt;/themes/next/_config.yml</code>.</li>
<li><a target="_blank" rel="noopener" href="https://hexo.io/docs/data-files">Data Files</a>: 可以把Next的样式文件放在<code>&lt;hexo-dir&gt;/source/_data/</code></li>
<li><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/advanced-settings/custom-files.html">Custom Files</a>: 可以在Next配置文件中, 指定Data files来替换掉主题目录下的对应文件.</li>
</ul>
<p>当然了, 不是所有主题都像Next一样提供了这些机制. 在这些主题中, 要想对主题做更改, 就得改主题目录下的文件. 此时如果要接受主题官方的更新, 就得把原来的主题目录备份, pull更新后再仔细地修改回去, 这非常麻烦. 对于这种情况, 我的建议是:</p>
<ul>
<li>要么别对主题做任何修改.</li>
<li>要么就不接受官方的更新, 直接把官方主题fork下来作为自己的仓库, 之后就和这个仓库做同步, 也就是<a href="#Apply-separate-version-control-to-themes">对主题做单独的版本管理</a>.</li>
</ul>
<h2 id="Alternate-Theme-Config"><a class="header-anchor" href="#Alternate-Theme-Config"></a>Alternate Theme Config</h2>
<ol>
<li>
<p>把主题配置文件复制到Hexo项目目录下, 取名为 <code>_config.[name].yml</code>. Replace <code>[name]</code> with the value of <code>theme</code> option in Hexo config file. For NexT theme, the file name is <code>_config.next.yml</code> by default</p>
</li>
<li>
<p>现在主题的配置文件就会读取Hexo项目目录的<code>_config.[name].yml</code>, 而不是主题目录的<code>_config.yml</code>. 由于位于Hexo项目目录下, <code>_config.[name].yml</code>会随着每次的push被push到Hexo项目的仓库. 不用担心<strong>子项目问题</strong></p>
</li>
<li>
<p>多主机同步时, 新主机只需clone整个项目:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/LYK-love/LYK-love.github.io</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Next-Doc"><a class="header-anchor" href="#Next-Doc"></a>Next Doc</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://theme-next.js.org/">Next Official Doc</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next">Next Github Repo</a></li>
</ul>
<p>尽量以官方文档为准, Github repo上只有很少的信息. 此外, Next在Github上存在多个Github repo, 除了<a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next">Next Github Repo</a>之外的Repo都已经过时了, 请不要被混淆. 例如该repo:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next">https://github.com/theme-next/hexo-theme-next</a></li>
</ul>
<p>就是一个过时的repo, 其next版本只到7.8.0. 而直到本文写作时, next版本已经达到8.15.1了, 因此要注意区分.</p>
<h2 id="Version"><a class="header-anchor" href="#Version"></a>Version</h2>
<p>NeXt &lt; 8 好像没办法查看版本</p>
<p>Next &gt;=8 之后, 每次<code>hexo s/d</code>时在命令行的输出里都有Next版本信息. 此外<code>hexo version</code>也会显示next版本.</p>
<h2 id="Installation"><a class="header-anchor" href="#Installation"></a>Installation</h2>
<p><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/getting-started/installation.html">Next Official Doc: Installation</a></p>
<p>无论是下载还是更新Next, 都要先更新到最新的Hexo.</p>
<p>为了及时收到Next官方的更新, 我就不单独开一个github仓库对主题做版本管理了.</p>
<h3 id="Using-npm"><a class="header-anchor" href="#Using-npm"></a>Using npm</h3>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install hexo-theme-next@latest</span><br></pre></td></tr></table></figure>
<ul>
<li>npm会把主题文件夹下载到<code>/node_modules/hexo-theme-next</code></li>
</ul>
<h3 id="Using-git"><a class="header-anchor" href="#Using-git"></a>Using git</h3>
<p>In hexo directory:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
<ul>
<li>注意, 如果在<code>themes/</code>下已经存在了主题文件夹, 则Hexo会忽略<code>node_modules/</code>中可能存在的主题文件夹, 使用<code>themes</code>下的. 也就是说git安装的主题会覆盖npm安装的主题.</li>
<li>我选择用git来安装, 原因是这样做可以比较方便地跳转到主题目录去看Next的源代码.</li>
</ul>
<h2 id="After-Installation"><a class="header-anchor" href="#After-Installation"></a>After Installation</h2>
<p>安装成功后就可以使用了, 命令行输入如下:</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">❯ hexo s</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  ==================================</span><br><span class="line"><span class="code">  ███╗   ██╗███████╗██╗  ██╗████████╗</span></span><br><span class="line"><span class="code">  ████╗  ██║██╔════╝╚██╗██╔╝╚══██╔══╝</span></span><br><span class="line"><span class="code">  ██╔██╗ ██║█████╗   ╚███╔╝    ██║</span></span><br><span class="line"><span class="code">  ██║╚██╗██║██╔══╝   ██╔██╗    ██║</span></span><br><span class="line"><span class="code">  ██║ ╚████║███████╗██╔╝ ██╗   ██║</span></span><br><span class="line"><span class="section">  ╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝   ╚═╝</span></span><br><span class="line"><span class="section">========================================</span></span><br><span class="line">NexT version 8.15.1</span><br><span class="line"><span class="section">Documentation: https://theme-next.js.org</span></span><br><span class="line"><span class="section">========================================</span></span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<h2 id="Upgrade"><a class="header-anchor" href="#Upgrade"></a>Upgrade</h2>
<p>已经采用了Alternate Theme Config, 因此可以平滑地升级:</p>
<ol>
<li><code>cd themes/next</code></li>
<li><code>git pull</code></li>
</ol>
<p>保险起见, 可以备份old主题文件夹的文件, 把旧主题文件夹rename为<code>next-old</code>. 当然, 我不会更改主题目录下的任何文件, 因此不备份也没关系.</p>
<h2 id=""><a class="header-anchor" href="#"></a></h2>
<h1 id="Next-Theme-Config"><a class="header-anchor" href="#Next-Theme-Config"></a>Next Theme Config</h1>
<p><a target="_blank" rel="noopener" href="https://convivae.top/posts/hexo-bo-ke-cai-keng/">进阶配置</a></p>
<ul>
<li>
<p>Schemes: 目前觉得Mist比较好看</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Mist</span></span><br><span class="line"><span class="comment"># scheme: Pisces</span></span><br><span class="line"><span class="comment"># scheme: Gemini</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置语言: 我使用默认的英语. 如果要使用汉语, 可以编辑主题配置文件:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>首页文章显示摘要: 在文章中适当位置插入 <code>&lt;!--more--&gt;</code>，该位置之前的部分即为摘要，会显示在首页中.</p>
</li>
<li>
<p>sidebar社交链接: 邮箱前要加<code>mailto:</code>, 这还是我用开发者工具查别人的网站发现的..( 其实mailto是html中发送email的代码 )</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/LYK-love</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:191820133@smail.nju.edu.cn</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>sidebar社交链接的图案:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icons_only:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">transition:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>添加建站时间, 不加的话就会显示当前年份:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the date when the site was setup. If not defined, current year will be used.</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2021</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>关掉闪烁:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">quicklink:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Toc: Table of Contents in the Sidebar. 主要是sidebar里面的标题要不要自动进行数字编号. 默认为true. 我不喜欢编号：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Configuring-Favicon"><a class="header-anchor" href="#Configuring-Favicon"></a>Configuring Favicon</h2>
<p>By default the Hexo site use NexT favicons in <code>[hexo-site]/themes/next/source/images/</code> directory with different size for different device. You can replace them with your own favicons.</p>
<p>但是, 如果使用npm安装Next, 则主题文件夹是<code>[hexo-site]/node_modules/hexo-theme-next</code>, 无法进行版本管理.</p>
<p>因此, Hexo也支持将图片放在<code>[hexo-site]/source/images/</code>. 我也<strong>强烈推荐</strong>这么做, 这样就可以进行版本管理了:</p>
<ol>
<li>
<p>先手动创建文件夹:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> [hexo-site]/source</span><br><span class="line"><span class="built_in">mkdir</span> images</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>后续在Next配置文件中使用<code>images</code>路径来找到图片:</p>
<ul>
<li>由于<code>themes/next/source/images/</code>和<code>source/images/</code>都可以放图片, 该操作实际上会扫描这两个文件夹</li>
</ul>
</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">mkdir images</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>设置站点图标:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="comment"># small: /images/favicon-16x16-next.png</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/white_flower1.jpg</span></span><br><span class="line">  <span class="comment"># medium: /images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/white_flower1.jpg</span></span><br><span class="line">  <span class="comment"># apple_touch_icon: /images/apple-touch-icon-next.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/white_flower1.jpg</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置菜单: 真不知道about页面有啥用</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="comment"># about: /about/ || user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable / Disable menu icons / item badges.</span></span><br><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置sidebar avatar, 并且让图片圆形显示</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/white_flower1.jpg</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be displayed in circle.</span></span><br><span class="line">  <span class="comment"># 圆形显示</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be rotated with the cursor.</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>头像必须存放在<code>&lt;next&gt;/themes/source/images/</code></p>
</li>
</ul>
<h2 id="Local-Search"><a class="header-anchor" href="#Local-Search"></a>Local Search</h2>
<p>使用本地搜索，按以下步骤配置：</p>
<ol>
<li>
<p>安装 hexo-generator-searchdb 插件：加了这个之后,博客生成时间要慢好几秒, 不过也是值得的</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编辑Hexo配置文件 <code>_config.yml</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编辑Next配置文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Baidu-Analysis"><a class="header-anchor" href="#Baidu-Analysis"></a>Baidu Analysis</h2>
<p>也可以添加Google统计, 都差不多</p>
<ol>
<li>
<p>开通百度统计帐号: 在 <a target="_blank" rel="noopener" href="https://tongji.baidu.com/web/welcome/login"><strong>百度统计</strong></a> 注册帐号. 帐号注册成功后，在侧边栏<code>账户管理 -&gt; 网站列表</code>，点击右侧<code>新增网站</code>按钮</p>
</li>
<li>
<p>添加<code>网站域名/网站首页</code>信息后，点击<code>确定</code>按钮，百度统计会提供一段<code>JS</code>脚本用于嵌入</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> _hmt = _hmt || [];</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> hm = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">  hm.<span class="property">src</span> = <span class="string">&quot;https://hm.baidu.com/hm.js?&lt;app-id&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;script&quot;</span>)[<span class="number">0</span>]; </span><br><span class="line">  s.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>粘贴上面代码中的`<app-id>, 复制到主题配置文件:</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">baidu_analytics: &lt;app-<span class="built_in">id</span>&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>Next主题已对百度统计进行配置优化，因此只需要编辑配置文件, 填写<code>app-id</code>. 对于更一般的情况, 需要把上面的JS代码添加到网站全部页面的 <code>&lt;/head&gt;</code> 标签前.</li>
</ul>
</li>
<li>
<p>如果代码安装正确，一般20分钟后，可以查看网站分析数据.</p>
</li>
</ol>
<h1 id="Math-Support"><a class="header-anchor" href="#Math-Support"></a>Math Support</h1>
<p><a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/MATH.md">Next数学公式支持官方文档</a></p>
<p><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/third-party-services/math-equations.html?highlight=mathjax#mjx-eqn%3Aeq2">Next Mathjax高级特性</a></p>
<p>目前的Latex渲染引擎有 <a target="_blank" rel="noopener" href="https://www.mathjax.org/">MathJax</a> 和 <a target="_blank" rel="noopener" href="https://khan.github.io/KaTeX/">Katex</a>, <code>MathJax</code>完美支持Latex, <code>Katex</code>速度更快, 但是有些语法不支持. 综合来看还是选择Mathjax.</p>
<p>Hexo需要使用markdown渲染引擎将md渲染成html, 而Hexo NexT默认使用的markdown渲染引擎是<a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>, 它不支持Mathjax，不支持插件扩展，不支持emoji表情, 因此我们需要卸载它, 并替换为别的引擎.</p>
<p>注意, 不同的渲染引擎是不能共存的( <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-filter-mathjax">hexo-filter-mathjax</a>除外, 它是server端的渲染引擎 ), 因此在使用一个渲染引擎之前, 需要卸载掉其他全部的渲染引擎,</p>
<h2 id="Engines"><a class="header-anchor" href="#Engines"></a>Engines</h2>
<p>Next支持的markdown数学渲染引擎:</p>
<h3 id="Mathjax"><a class="header-anchor" href="#Mathjax"></a>Mathjax</h3>
<p>If you use MathJax to render Math Equations, you can choose one of the Markdown renderers below:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-renderer-pandoc">hexo-renderer-pandoc</a>
<ul>
<li>pandoc功能非常强大, 支持Mathjax语法, 不仅可以渲染markdown, 还支持textile, reStructedText和许多其他格式, 但仍然不支持emoji表情.</li>
<li>但是使用pandoc会使得内建的汇总文件<code>db.json</code>变得更常大. 无论是到Github的同步还是博客内建的搜索功能都会变得很慢. 同时pandoc的渲染速度也很慢, 降低博客文章的构建速度. 可以说, 用了pandoc后, 整个网站都慢得离谱.</li>
<li>此外, 它和Next的集成有问题, 无法正确把生成的HTML文件的标题加入Anchor.</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/sun11/hexo-renderer-kramed">hexo-renderer-kramed</a>: 基于hexo-renderer-marked二次开发的渲染器，完善了对Mathjax的支持, 仍然不支持插件的扩展，不支持emoji表情.
<ul>
<li>亲测它比<code>hexo-renderer-pandoc</code><strong>快一点</strong>. 但是有bug, 需要自己配置. 由于它太老了,就不推荐了.</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a>：支持<code>MathJax</code>, 并可以通过插件支持<code>KeTex</code>.
<ul>
<li>支持Markdown以及CommonMark语法.</li>
<li>支持插件配置, 支持标题带安全的id信息</li>
<li>支持脚注（上标, 下标, 下划线）</li>
<li><strong>我最后选择<code>hexo-renderer-markdown-it</code></strong></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a>: 支持Katex插件并默认启用.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-filter-mathjax">hexo-filter-mathjax</a>: Server side <a target="_blank" rel="noopener" href="http://www.mathjax.org/">MathJax</a> Renderer Plugin for <a target="_blank" rel="noopener" href="http://hexo.io/">Hexo</a>. 要使用它,需要卸载掉除了<code>hexo-renderer-marked</code> ( 用于渲染markdown )之外的LaTex引擎. 它的缺点是有些语法不支持, 而且无法渲染目录里的LaTex.</li>
</ul>
<h3 id="KaTex"><a class="header-anchor" href="#KaTex"></a>KaTex</h3>
<p>If you use KaTeX to render Math Equations, you can choose one of the Markdown renderers below:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a>: 没用过</li>
<li><a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a>: 亲测它也支持Mathjax, 并支持Hexo支持的Mathjax特性</li>
</ul>
<h2 id="Support-MathJax"><a class="header-anchor" href="#Support-MathJax"></a>Support MathJax</h2>
<p>支持Latex步骤:</p>
<ol>
<li>
<p>卸载<code>hexo-renderer-marked</code>, 安装 <code>hexo-renderer-markdown-it</code>:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm un hexo-renderer-marked</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># npm i hexo-renderer-pandoc --save 有问题, 废弃</span></span><br><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>如果选择<code>hexo-renderer-pandoc</code> , 还需要额外安装<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc/blob/master/INSTALL.md">pandoc</a></p>
<p>for Mac:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew install pandoc</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>开启mathjax:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="comment"># Default (false) will load mathjax / katex script on demand.</span></span><br><span class="line">  <span class="comment"># That is it only render those page which has `mathjax: true` in front-matter.</span></span><br><span class="line">  <span class="comment"># If you set it to true, it will load mathjax / katex script EVERY PAGE.</span></span><br><span class="line">  <span class="attr">every_page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">ams</span> <span class="comment"># ams: 开启公式自动编号</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>per_page</code>: 设置为false, 这样只会渲染添加了<code>mathjax: true</code>的文章
<ul>
<li>在低版本的NeXt,这句话上面的注释是反的, 即“false”只会渲染指定文章.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>在需要渲染Latex的文章的Front-matter里打开mathjax开关，如下：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: index.html</span><br><span class="line">date: 2016-12-28 21:01:30</span><br><span class="line">tags:</span><br><span class="line"><span class="section">mathjax: true</span></span><br><span class="line"><span class="section">--</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="公式自动编号和引用"><a class="header-anchor" href="#公式自动编号和引用"></a>公式自动编号和引用</h2>
<p>To enable this feature, you need to set <code>mathjax.tags</code> to <code>ams</code> in NexT config file.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">ams</span></span><br></pre></td></tr></table></figure>
<p>为了使用这项功能，一般来说，你必须把所使用的 LaTeX 公式放在 <code>equation</code> 环境里面，采用旧的方法（也就是说，仅仅把公式的每一边用两个 <code>$</code> 符号包含起来）是无效的。如何引用公式？你只需要在书写公式的时候给公式一个 <code>\label&#123;&#125;</code> 标记（tag），然后在正文中，可以使用 <code>\ref&#123;&#125;</code> 或者 <code>\eqref&#123;&#125;</code> 命令来引用对应的公式。使用 <code>\eqref&#123;&#125;</code> 是推荐的方式，因为如果你使用 <code>\ref&#123;&#125;</code>，公式在文中的引用编号将没有圆括号包围。下面介绍几种常见的公式编号例子.</p>
<p>对于简单的公式，使用下面的方式给公式一个标记，</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\begin</span>&#123;equation&#125;<span class="keyword">\label</span>&#123;eq1&#125;</span><br><span class="line">e=mc<span class="built_in">^</span>2</span><br><span class="line"><span class="keyword">\end</span>&#123;equation&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<p>然后，在正文中，你可以轻松引用上述公式，一个简单的例子如下：</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">著名的质能方程 <span class="variable">$\</span>eqref&#123;eq1&#125;<span class="variable">$ </span>由爱因斯坦提出 ...</span><br></pre></td></tr></table></figure>
<h2 id="Multi-line-Equations"><a class="header-anchor" href="#Multi-line-Equations"></a>Multi-line Equations</h2>
<p>对于多行公式，在 <code>equation</code> 环境中，你可以使用 <code>aligned</code> 环境把公式分成多行，</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\begin</span>&#123;equation&#125;<span class="keyword">\label</span>&#123;eq2&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;aligned&#125;</span><br><span class="line">a <span class="built_in">&amp;</span>= b + c <span class="keyword">\\</span></span><br><span class="line">  <span class="built_in">&amp;</span>= d + e + f + g <span class="keyword">\\</span></span><br><span class="line">  <span class="built_in">&amp;</span>= h + i</span><br><span class="line"><span class="keyword">\end</span>&#123;aligned&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;equation&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h2 id="Multiple-Aligned-Equations"><a class="header-anchor" href="#Multiple-Aligned-Equations"></a>Multiple Aligned Equations</h2>
<p>要对齐多个公式，我们需要使用 <code>align</code> 环境。align 环境中的每个公式都有自己的编号：</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\begin</span>&#123;align&#125;</span><br><span class="line">a <span class="built_in">&amp;</span>= b + c <span class="keyword">\label</span>&#123;eq3&#125; <span class="keyword">\\</span></span><br><span class="line">x <span class="built_in">&amp;</span>= yz <span class="keyword">\label</span>&#123;eq4&#125;<span class="keyword">\\</span></span><br><span class="line">l <span class="built_in">&amp;</span>= m - n <span class="keyword">\label</span>&#123;eq5&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;align&#125;<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<h2 id="Exclude-Equations-from-Numbering"><a class="header-anchor" href="#Exclude-Equations-from-Numbering"></a>Exclude Equations from Numbering</h2>
<p>在 <code>align</code> 环境中，如果你不想给某个或某几个公式编号，那么在这些公式后面使用 <a target="_blank" rel="noopener" href="https://tex.stackexchange.com/questions/17528/show-equation-number-only-once-in-align-environment"><code>\nonumber</code></a> 命令即可。例如：</p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">$$<span class="string">\begin&#123;align&#125;</span></span><br><span class="line">-<span class="number">4</span> + <span class="number">5x</span> &amp;= <span class="number">2</span>+y <span class="string">\nonumber</span>  <span class="string">\\</span></span><br><span class="line"> w+<span class="number">2</span> &amp;= -<span class="number">1</span>+w <span class="string">\\</span></span><br><span class="line"> ab &amp;= cb</span><br><span class="line"><span class="string">\end&#123;align&#125;$$</span></span><br></pre></td></tr></table></figure>
<h2 id="Use-tag-to-Tag-Equations"><a class="header-anchor" href="#Use-tag-to-Tag-Equations"></a>Use <code>\tag</code> to Tag Equations</h2>
<p>有时，你可能会希望采用更加奇特的方式来标记和引用你的公式，你可以通过使用 <code>\tag&#123;&#125;</code> 命令来实现，例如：</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line"><span class="symbol">$</span><span class="symbol">$</span>x+<span class="number">1</span>\over\<span class="built_in">sqrt</span>&#123;<span class="number">1</span>-x^<span class="number">2</span>&#125; \tag&#123;i&#125;\label&#123;eq_tag&#125;<span class="symbol">$</span><span class="symbol">$</span></span><br></pre></td></tr></table></figure>
<p>如果你想要了解更多信息，请访问 <a target="_blank" rel="noopener" href="https://docs.mathjax.org/en/latest/input/tex/eqnumbers.html">MathJax 关于公式编号的官方文档</a>。同时，你也可以阅读 <a target="_blank" rel="noopener" href="https://theme-next.org/docs/third-party-services/math-equations">这篇文档</a> 来获取更多细节信息。</p>
<h1 id="Customization"><a class="header-anchor" href="#Customization"></a>Customization</h1>
<h2 id="Fonts-Customization"><a class="header-anchor" href="#Fonts-Customization"></a>Fonts Customization</h2>
<p>My fonts:</p>
<ul>
<li>Chinese: Noto Serif SC</li>
<li>English: Fira Code</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/theme-settings/miscellaneous.html?highlight=font+settings#Fonts-Customization">Fonts Customization</a>. 这上面的部分细节过时了, 以我这里写的为准.</p>
<blockquote>
<p>NexT gives you 5 specific font settings, they are:</p>
<ul>
<li>Global Font: Font used in the whole site.</li>
<li>Title Font: Font used by site title.</li>
<li>Headlines Font: Font used by headings in articles (h1, h2, h3, h4, h5, h6).</li>
<li>Article Font: Font used by articles.</li>
<li>Code Font: Font used by code blocks in articles.</li>
</ul>
<p>Each font will be used as the first font of this class, NexT will <strong>fallback</strong> to internal font settings if they are unavailable.</p>
<ul>
<li>Non-code Font: Fallback to <code>&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif</code></li>
<li>Code Font: Fallback to <code>consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace</code></li>
</ul>
<p>Plus each section has a <code>external</code> attribute, this controls whether to use the font library CDN.<br>
Use this can help you to use fonts installed in system and reduce unnecessary requests.</p>
</blockquote>
<blockquote></blockquote>
<h3 id="Chinese-Font"><a class="header-anchor" href="#Chinese-Font"></a>Chinese Font</h3>
<p>低版本Next的默认字体(<code>font: false</code>)很丑, 不知道是什么字体. 新版本的Next的默认字体是Microsoft YaHei, 也可以自己更改. 我在<code>NexT _config.yml</code>中配置了Fira Code:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="comment"># For accessibility in China mainland, I replace it with ustc source</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">https://fonts.lug.ustc.edu.cn</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Fira</span> <span class="string">Code</span></span><br><span class="line">    <span class="attr">size:</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>To solve the unstable of <a target="_blank" rel="noopener" href="https://fonts.google.com/">Google Fonts API</a> in some countries, NexT supports custom URL of fonts library by setting <code>font.host</code>.</p>
</blockquote>
<p>为了在中国大陆的访问, 我把 <code>font.host</code>换成了ustc源. 设置<code> external: true</code>来从把 <code>font.host</code>加载font.</p>
<h3 id="English-Font"><a class="header-anchor" href="#English-Font"></a>English Font</h3>
<p>按<a target="_blank" rel="noopener" href="https://hexo-next.readthedocs.io/zh_CN/latest/next/advanced/%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/">Next中文文档</a>的说明, 通过<code>NexT _config.yml</code>仅能替换中文字体/英文字体其中一种. Fira Code是英文字体, 要想再配置中文字体, 需要改更改Next的样式文件.</p>
<p>由于之前讲过的<a target="_blank" rel="noopener" href="https://hexo.io/docs/data-files">Data Files</a> 和 <a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/advanced-settings/custom-files.html">Custom Files</a> feature, 我不需要更改主题目录下的文件, 而是将它们copy到<code>&lt;hexo&gt;/source/_data</code>作为data files, 然后在<code>NexT _config.yml</code>指定它们作为custom files.</p>
<ol>
<li>
<p>First, copy <code>&lt;hexo&gt;/themes/next/source/css/_variables/base.styl</code> to <code>&lt;hexo&gt;/source/_data/</code>. Rename <code>&lt;hexo&gt;/source/_data/base.styl</code> to <code>&lt;hexo&gt;/source/_data/variables.styl</code>.</p>
</li>
<li>
<p>Edit <code>&lt;hexo&gt;/source/_data/variables.styl</code>, clear it original content, then add:</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"># use <span class="string">&#x27;Noto Serif SC&#x27;</span></span><br><span class="line"><span class="variable">$font</span>-family-chinese      = <span class="string">&#x27;Noto Serif SC&#x27;</span>, Monaco, Consolas, Ubuntu Mono, monospace;</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-base         = <span class="variable">$font</span>-family-chinese, sans-serif;</span><br><span class="line"><span class="variable">$font</span>-family-base         = <span class="built_in">get_font_family</span>(<span class="string">&#x27;global&#x27;</span>), <span class="variable">$font</span>-family-chinese, sans-serif <span class="keyword">if</span> <span class="built_in">get_font_family</span>(<span class="string">&#x27;global&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-logo         = <span class="variable">$font</span>-family-base;</span><br><span class="line"><span class="variable">$font</span>-family-logo         = <span class="built_in">get_font_family</span>(<span class="string">&#x27;title&#x27;</span>), <span class="variable">$font</span>-family-base <span class="keyword">if</span> <span class="built_in">get_font_family</span>(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-headings     = <span class="variable">$font</span>-family-base;</span><br><span class="line"><span class="variable">$font</span>-family-headings     = <span class="built_in">get_font_family</span>(<span class="string">&#x27;headings&#x27;</span>), <span class="variable">$font</span>-family-base <span class="keyword">if</span> <span class="built_in">get_font_family</span>(<span class="string">&#x27;headings&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-posts        = <span class="variable">$font</span>-family-base;</span><br><span class="line"><span class="variable">$font</span>-family-posts        = <span class="built_in">get_font_family</span>(<span class="string">&#x27;posts&#x27;</span>), <span class="variable">$font</span>-family-base <span class="keyword">if</span> <span class="built_in">get_font_family</span>(<span class="string">&#x27;posts&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$font</span>-family-monospace    = consolas, Menlo, monospace, <span class="variable">$font</span>-family-chinese;</span><br><span class="line"><span class="variable">$font</span>-family-monospace    = <span class="built_in">get_font_family</span>(<span class="string">&#x27;codes&#x27;</span>), consolas, Menlo, monospace, <span class="variable">$font</span>-family-chinese <span class="keyword">if</span> <span class="built_in">get_font_family</span>(<span class="string">&#x27;codes&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>This will overwrite <code>&lt;hexo&gt;/themes/next/source/css/_variables/base.styl</code> 's config with custom file's config.</p>
</li>
<li>
<p>Create file <code>&lt;hexo&gt;/source/_data/head.njk</code> , then input:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;link href=&quot;https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Then uncomment <code>style</code> and <code>head</code> under the <code>custom_file_path</code> section in NexT config file.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="string">source/_data/head.njk</span> <span class="comment"># Used to config font.</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.njk</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.njk</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.njk</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="comment">#style: source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Code-Block"><a class="header-anchor" href="#Code-Block"></a>Code Block</h2>
<ul>
<li>
<p>代码高亮(Code Highlight theme): 这个网站可以预览所有高亮效果：<a target="_blank" rel="noopener" href="https://theme-next.js.org/highlight/">传送门</a></p>
<p>我使用highlight作为高亮引擎, theme使用<code>a11y-light</code></p>
</li>
<li>
<p>我没有设置代码块行号</p>
</li>
</ul>
<p><code>NexT _config.yml</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="comment"># light: default</span></span><br><span class="line">    <span class="comment"># dark: stackoverflow-dark</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">a11y-light</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">a11y-dark</span></span><br><span class="line">  <span class="attr">prism:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">prism</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">prism-dark</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">flat</span></span><br></pre></td></tr></table></figure>
<p><code>Hexo _config.yml</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="Image"><a class="header-anchor" href="#Image"></a>Image</h2>
<h3 id="图像缩放"><a class="header-anchor" href="#图像缩放"></a>图像缩放</h3>
<p><code>NexT</code>集成了多种图像显示工具, 包括<code>FancyBox</code>和<code>MediumZoom</code>, 主要功能是图像缩放.</p>
<p>开启<code>MediumZoom</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># A JavaScript library for zooming images like Medium.</span></span><br><span class="line"><span class="comment"># Warning: Do not enable both `fancybox` and `mediumzoom`.</span></span><br><span class="line"><span class="comment"># For more information: https://medium-zoom.francoischalifour.com</span></span><br><span class="line"><span class="attr">mediumzoom:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="图像懒加载"><a class="header-anchor" href="#图像懒加载"></a>图像懒加载</h3>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">npm install hexo-lazyload <span class="comment">--save</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">lazyload:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="访客人数-文章阅读次数"><a class="header-anchor" href="#访客人数-文章阅读次数"></a>访客人数&amp;&amp;文章阅读次数</h2>
<p><code>NexT</code>主题已集成了不蒜子的访客人数和文章阅读统计功能:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在首页显示文章的阅读次数</li>
<li>点击全文阅读显示阅读次数</li>
<li>在底部可以看见访客人数和文章阅读次数</li>
</ul>
<h2 id="back2top-button"><a class="header-anchor" href="#back2top-button"></a>back2top button</h2>
<p>back2top button非常好看, Next默认是添加的:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar. button默认出现在左下角, 如果这里为true,就会出现在sidebar里面(头像, 目录下面),很难察觉</span></span><br><span class="line">  <span class="comment"># 所以我设为false</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="comment"># 让to-top的小箭头随时显示数值, 我觉得这样破坏阅读体验, 所以为false</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>如果自带的不能满足你, 那么这里有个<a target="_blank" rel="noopener" href="https://github.com/jiangtj-lab/hexo-cake-moon-menu">另外的button</a>.</p>
<h2 id="Copyright"><a class="header-anchor" href="#Copyright"></a>Copyright</h2>
<p>选择<code>sidebar: true</code>, 这会在sidebar出现不怎么碍眼的一个小徽章.</p>
<p>如果选择<code>post: false</code>, 版权信息会出现在文章底部, 很难看.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># See: https://creativecommons.org/about/cclicenses/</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="comment"># Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="comment"># Available values: big | small</span></span><br><span class="line">  <span class="attr">size:</span> <span class="string">small</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span></span><br><span class="line">  <span class="comment"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure>
<h1 id="Synchronize-between-mul-hosts"><a class="header-anchor" href="#Synchronize-between-mul-hosts"></a>Synchronize between mul-hosts</h1>
<p>如果想要在多台主机上同步Hexo项目, 只需要把自己的Hexo Github Repo clone下来.</p>
<p>但是, 主题一般是用git clone来下载的, 这会让主题文件夹作为一个git submodule存在于项目目录下. 在<strong>当push本地仓库时, submodule不会被push</strong>.</p>
<ul>
<li>证据就是, 在github上查看网站项目仓库, 点进<code>&lt;repository&gt;/themes/</code>, 会发现<code>next</code>文件夹有个很奇怪的名字: <code>[next @ XXXXX</code>, 点击它, 会跳转到该主题文件夹对应的github项目. 这说明<strong>本地的主题文件夹是一个子项目, 从来没有随着父项目一起被push到github上</strong>.</li>
</ul>
<p>因此, 在其他主机上clone Hexo项目, 它clone下的主题文件夹是空的.</p>
<ul>
<li>
<p>比如, 我用next主题, 当我买了台新电脑, 想要在它上面同步我开发的hexo. clone下我的网站, 发现项目内<code>themes/next</code>为空. 这样就无法正确生成网站页面了.</p>
<blockquote>
<p>该Bug的表面结果是: hexo生成的<code>index.html</code>也为空( 0kb )</p>
</blockquote>
</li>
</ul>
<p>所以<strong>clone下来的Hexo项目是没有主题的, 需要自己重新安装主题.</strong></p>
<ul>
<li>虽然我用git clone来下载主题, 但有些主题也可以也可以用npm install来下载(比如Next). 用npm下载的主题不会有git submodule的问题, 在其他主机上clone Hexo Repo后npm install下载依赖即可.</li>
</ul>
<h2 id="Steps"><a class="header-anchor" href="#Steps"></a>Steps</h2>
<p>多主机同步的步骤, 就是先同步Hexo, 再同步主题.</p>
<h3 id="Synchronize-Hexo"><a class="header-anchor" href="#Synchronize-Hexo"></a>Synchronize Hexo</h3>
<p>如果本机已经有hexo了:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果本机已经有hexo了</span></span><br><span class="line"><span class="built_in">cd</span> &lt;hexo&gt;</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>
<p>如果本机没有Hexo, 只需找个地方安装Hexo即可.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/LYK-love/LYK-love.github.io</span><br><span class="line">cd LYK-love.github.io</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>可能会遇到报错:</p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ERROR </span>Cannot find module &#x27;hexo&#x27; from &#x27;/Users/lyk/Documents/LYK-love.github.io&#x27;</span><br><span class="line">&lt;Snip&gt;</span><br><span class="line"><span class="keyword">ERROR </span>Try running: &#x27;rm -rf node_modules &amp;&amp; npm install --force&#x27;</span><br></pre></td></tr></table></figure>
<p>只需按照提示操作即可:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf node_modules &amp;&amp; npm install --force</span><br></pre></td></tr></table></figure>
<h3 id="Synchronize-Theme"><a class="header-anchor" href="#Synchronize-Theme"></a>Synchronize Theme</h3>
<p>由于<a href="#Config-File-Features">Next提供的各种机制</a>, 主题配置文件, 样式文件等已经在Hexo目录中被同步了. 因此这一步只需<strong>安装主题</strong>即可.</p>
<ul>
<li>如果你用的是官方的主题, 那就去安装官方的主题, 例如对于Next, 就可以按照<a href="#Installation">之前的教程</a>.</li>
<li>如果你要<a href="#Apply-separate-version-control-to-themes">对主题做单独的版本管理</a> (很不推荐这种做法), 那么主题文件就是个git submodule, 需要<a href="#Update-submodule">Update submodule</a>.</li>
</ul>
<p>如果还有文件没同步, 比如images等文件, 它们只能放在主题目录下, 但是如前所述, 每次从官方同步主题都会覆盖自己的更改, 那么可以把这些文件备份一下放在Hexo目录下, 之后手动copy到主题目录中.</p>
<ul>
<li>我的images就放在Hexo目录下, 每次更新主题后手动copy到<code>source/images</code>中.</li>
</ul>
<h1 id="Apply-separate-version-control-to-themes"><a class="header-anchor" href="#Apply-separate-version-control-to-themes"></a>Apply separate version control to themes</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903751908605965"> 在 hexo 中使用 git submodules 管理主题 </a></li>
</ul>
<p>我极其不推荐这种做法, 将主题进行单独的版本管理会导致主题无法收到官方仓库的更新.</p>
<p>首先, 在Github上创建一个自己的主题的仓库. 由于主题是git submodule, 不会随着Hexo项目的push而被push, 所以每次push Hexo时, 还要额外push一下主题:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># ... after push Hexo</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Now push my Next theme</span></span></span><br><span class="line">cd ./themes/next</span><br><span class="line">git add . &amp;&amp; git commit -m&quot;XXX&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<h2 id="Update-submodule"><a class="header-anchor" href="#Update-submodule"></a>Update submodule</h2>
<p>接下来. 如果本机已经有了主题的submodule, 则只需update submodule:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">把项目的子项目也pull下来</span></span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure>
<p>当然也可以pull Hexo后手动再pull子项目,这样很蠢:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ./themes/next</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>
<h2 id="Add-submodule"><a class="header-anchor" href="#Add-submodule"></a>Add submodule</h2>
<p>如果本机没有主题的submodule. 可以将主题作为submodule添加进来:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd &lt;hexo&gt;</span><br><span class="line">git submodule add &lt;your own theme repo&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>git submodule add &lt;sub-module-registry&gt;</code>:  git 会将主题项目( 也就是我的<code>next</code>项目 )作为一个submodule,  clone 到 <code>themes/hexo</code> 中.</p>
<ul>
<li>同时 hexo 项目中会生成一个 <code>.gitmodules</code> 文件, 这个配置文件中保存了项目 URL 与已经拉取的本地目录之间的映射.</li>
</ul>
</li>
<li>
<p><code>.gitmodules 文件内容</code>:</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">&gt; <span class="keyword">cat</span> .gitmodules</span><br><span class="line">[submodule <span class="string">&quot;themes/next&quot;</span>]</span><br><span class="line">	path = themes/<span class="keyword">next</span></span><br><span class="line">	url = git@github.<span class="keyword">com</span>:LYK-love/<span class="keyword">next</span>.git</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>然后按之前的做法<strong>update submodule</strong>.</p>
<p>此外, 还可以在 clone 父项目时直接使用 <code>git clone --recursive</code> , git 会自动pull所有的子项目.</p>
<h1 id="Use-multi-branches-in-Github"><a class="header-anchor" href="#Use-multi-branches-in-Github"></a>Use multi-branches in Github</h1>
<p>在安装插件后,<code>hexo d</code>会生成网页文件, 并将其部署到GitHub和GitPage. 但是不会把源文件也push到github. 我们需要:</p>
<ol>
<li>
<p>在Github建两个分支,分别管理生成的网页文件和源文件:</p>
<ul>
<li>master: 用于存放<code>hexo d </code>部署的网页文件</li>
<li>hexo: 用于项目源文件, 包括文档源文件</li>
</ul>
</li>
<li>
<p>在Github仓库<code>-&gt;Settings-&gt;Branches-&gt;Default branch</code>中将默认分支设为<code>Hexo</code>. 这样每次手动push源文件,都到hexo分支.</p>
<p>当然也可以每次都手动指定,这样很蠢:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push origin hexo</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>而我们的<code>hexo d</code>会把生成的网页文件同步到master分支. 这是之前配置<code>hexo d</code>插件时设置的:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">git@github.com:LYK-love/LYK-love.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="一些不想用的美化"><a class="header-anchor" href="#一些不想用的美化"></a>一些不想用的美化</h1>
<p>以下美化我都不想用, 只是给出添加方式.</p>
<ul>
<li>
<p>添加评论系统. 我觉得没有这个必要.</p>
</li>
<li>
<p>夜间模式: 这是永久的, 不能手动切换, 所以我也不想加.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">darkmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Reading progress bar: 五颜六色的, 影响观看:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">reading_progress:</span> <span class="string">Reading</span> <span class="string">progress</span> <span class="string">bar</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Hexo/" rel="tag"># Hexo</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/25/Docker-Stack/" rel="prev" title="Docker Stack">
                  <i class="fa fa-chevron-left"></i> Docker Stack
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/04/OS-Persistence/" rel="next" title="OS Persistence">
                  OS Persistence <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2021 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LYK-love</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>

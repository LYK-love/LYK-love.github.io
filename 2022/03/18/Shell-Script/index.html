<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/white_flower1.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/white_flower1.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/white_flower1.jpg">
  <link rel="mask-icon" href="/images/white_flower1.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lyk-love.cn","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":"enable","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Outline:  Variable String Array Quoting Mechanism Control Flow I&#x2F;O redirection Function .....  ref:  shell tutorial">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell Script">
<meta property="og:url" content="http://lyk-love.cn/2022/03/18/Shell-Script/index.html">
<meta property="og:site_name" content="LYK-love">
<meta property="og:description" content="Outline:  Variable String Array Quoting Mechanism Control Flow I&#x2F;O redirection Function .....  ref:  shell tutorial">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-03-17T17:06:52.000Z">
<meta property="article:modified_time" content="2022-09-26T06:39:34.939Z">
<meta property="article:author" content="有多远滚多远">
<meta property="article:tag" content="shell">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://lyk-love.cn/2022/03/18/Shell-Script/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://lyk-love.cn/2022/03/18/Shell-Script/","path":"2022/03/18/Shell-Script/","title":"Shell Script"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Shell Script | LYK-love</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?07a572cad308bc3b22d354fca4209fed"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="LYK-love" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LYK-love</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-Script"><span class="nav-text">Shell Script</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Variable"><span class="nav-text">Variable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String"><span class="nav-text">String</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Array"><span class="nav-text">Array</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Quoting-Mechanism"><span class="nav-text">Quoting Mechanism</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#metacharacters"><span class="nav-text">metacharacters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#quoting"><span class="nav-text">quoting</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-text">条件语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if"><span class="nav-text">if</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case"><span class="nav-text">case</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#select-in-case-in"><span class="nav-text">select in &amp;&amp; case in</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-text">循环语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for"><span class="nav-text">for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-text">while</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E7%BB%84%E5%90%88"><span class="nav-text">命令组合</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E5%8F%A5%E5%9D%97"><span class="nav-text">语句块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#I-O-redirection"><span class="nav-text">I&#x2F;O redirection</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Here-Document"><span class="nav-text">Here Document</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#test"><span class="nav-text">test</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8E%E6%96%87%E4%BB%B6%E6%9C%89%E5%85%B3%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="nav-text">与文件有关的条件测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95"><span class="nav-text">字符串测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E6%B5%8B%E8%AF%95"><span class="nav-text">数值测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C"><span class="nav-text">逻辑操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Function"><span class="nav-text">Function</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#return-code"><span class="nav-text">return code</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-Call-from-Prompt"><span class="nav-text">Function Call from Prompt</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#output"><span class="nav-text">output</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#return-code-2"><span class="nav-text">return code</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#return-code-as-bool-value"><span class="nav-text">return code as bool value</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CMD-substitution"><span class="nav-text">CMD substitution</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arithmetic-substitution"><span class="nav-text">arithmetic substitution</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#variable-substitution"><span class="nav-text">variable substitution</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#process-substitution"><span class="nav-text">process substitution</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#operator"><span class="nav-text">operator</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Arithmetic-Operators"><span class="nav-text">Arithmetic Operators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Relational-Operators"><span class="nav-text">Relational Operators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Boolean-Operators"><span class="nav-text">Boolean Operators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String-Operators"><span class="nav-text">String Operators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#File-Test-Operators"><span class="nav-text">File Test Operators</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell-globbing"><span class="nav-text">shell globbing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#env-virable"><span class="nav-text">env virable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#parameter-variable"><span class="nav-text">parameter variable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scripts"><span class="nav-text">scripts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shebang"><span class="nav-text">shebang</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shebang-with-env"><span class="nav-text">shebang with env</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scripts-vs-shell-functions"><span class="nav-text">scripts vs shell functions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Potpourri"><span class="nav-text">Potpourri</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#execute-shell-scripts"><span class="nav-text">execute shell scripts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#-2"><span class="nav-text"></span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="有多远滚多远"
      src="/images/white_flower1.jpg">
  <p class="site-author-name" itemprop="name">有多远滚多远</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">206</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/LYK-love" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;LYK-love" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:191820133@smail.nju.edu.cn" title="E-Mail → mailto:191820133@smail.nju.edu.cn" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://lyk-love.cn/2022/03/18/Shell-Script/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/white_flower1.jpg">
      <meta itemprop="name" content="有多远滚多远">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LYK-love">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Shell Script | LYK-love">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Shell Script
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-17 17:06:52" itemprop="dateCreated datePublished" datetime="2022-03-17T17:06:52Z">2022-03-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-09-26 06:39:34" itemprop="dateModified" datetime="2022-09-26T06:39:34Z">2022-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Outline:</p>
<ul>
<li>Variable</li>
<li>String</li>
<li>Array</li>
<li>Quoting Mechanism</li>
<li>Control Flow</li>
<li>I/O redirection</li>
<li>Function</li>
<li>.....</li>
</ul>
<p>ref:  <a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/unix/unix-shell-functions.htm">shell tutorial</a></p>
 <span id="more"></span>
<h1 id="Shell-Script"><a class="header-anchor" href="#Shell-Script"></a>Shell Script</h1>
<p>不同的Shell实现会有不同的方言，不过这很少见。 这里只介绍最标准的Shell Script语法， 能够被最常用的Shell(如Bash)接受</p>
<p><a target="_blank" rel="noopener" href="https://github.com/onceupon/Bash-Oneliner">常见Shell指令</a></p>
<h2 id="Variable"><a class="header-anchor" href="#Variable"></a>Variable</h2>
<ul>
<li>
<p>assign variables in bash:  <code>foo=bar</code></p>
<ul>
<li>Note that <code>foo = bar</code> will not work since it is interpreted as calling the <code>foo</code> program with arguments <code>=</code> and <code>bar</code>. In general, in shell scripts the space character will perform argument splitting</li>
</ul>
</li>
<li>
<p>access the value of the variable:  <code>$foo</code></p>
<ul>
<li>等价于 <code>$&#123;foo&#125;</code>， 花括号可以精确地界定变量名称的范围。</li>
</ul>
</li>
<li>
<p>可以用<code>read</code>命令从标准输入接受数据并赋值:<code>read val</code></p>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /usr/bin/env bash</span></span><br><span class="line">echo -n &quot;Enter your name:&quot;</span><br><span class="line">read name</span><br><span class="line">echo &quot;hello $name&quot;</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="String"><a class="header-anchor" href="#String"></a>String</h2>
<ul>
<li>
<p>Strings in bash can be defined with <code>'</code> and <code>&quot;</code> delimiters, but they are not equivalent.</p>
</li>
<li>
<p>Strings delimited with <code>'</code> are <strong>literal string</strong>s and will not substitute variable values whereas <code>&quot;</code> delimited strings will.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">foo=bar</span><br><span class="line">echo &quot;$foo&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prints bar</span></span><br><span class="line">echo &#x27;$foo&#x27;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prints <span class="variable">$foo</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Array"><a class="header-anchor" href="#Array"></a>Array</h2>
<ul>
<li>
<p>array initialization −</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">array_name=(value1 ... valuen)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>assign</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">array_name[index]=value</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>access Array Values</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;array_name[index]&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Quoting-Mechanism"><a class="header-anchor" href="#Quoting-Mechanism"></a>Quoting Mechanism</h2>
<h3 id="metacharacters"><a class="header-anchor" href="#metacharacters"></a>metacharacters</h3>
<p>Unix Shell provides various metacharacters which have special meaning while using them in any Shell Script and causes termination of a word unless quoted.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">* ? [ ] &#x27; &quot; \ $ ; &amp; ( ) | ^ &lt; &gt; new-line space tab</span><br></pre></td></tr></table></figure>
<h3 id="quoting"><a class="header-anchor" href="#quoting"></a>quoting</h3>
<p>The following table lists the four forms of quoting −</p>
<table>
<thead>
<tr>
<th style="text-align:center"><a target="_blank" rel="noopener" href="http://Sr.No">Sr.No</a>.</th>
<th style="text-align:center">Quoting &amp; Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><strong>Single quote</strong><br/>All special characters between these quotes lose their special meaning.</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><strong>Double quote</strong><br/>Most special characters between these quotes lose their special meaning with these exceptions −$`$'&quot;\</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><strong>Backslash</strong><br/>Any character immediately following the backslash loses its special meaning.</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"><strong>Back quote</strong> (aka <strong>backtick</strong>)<br>Everything you type between backticks is evaluated (executed) by the shell before the main command, and the <em>output</em> of that execution is used by that command,</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>The Single Quotes: 其内容不转义, 相当于在每个字符前加 backslash</p>
</li>
<li>
<p>The Double Quotes： 其内容转义</p>
</li>
<li>
<p>The Backslash: 取消其后面的一个字符的转义</p>
</li>
<li>
<p>The Backquotes：将其内容视作 command 并执行， 与后文的CMD substitution类似</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">var=`command`</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">DATE=`date`</span><br><span class="line"></span><br><span class="line">echo $DATE</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">等价于后文的CMD substitution</span></span><br><span class="line">echo $(DATE)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="条件语句"><a class="header-anchor" href="#条件语句"></a>条件语句</h2>
<ul>
<li>As with most programming languages, bash supports control flow techniques including <code>if</code>, <code>case</code>, <code>while</code> and <code>for</code>.</li>
</ul>
<h3 id="if"><a class="header-anchor" href="#if"></a>if</h3>
<p>syntax:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if [ expression ] </span><br><span class="line">then </span><br><span class="line">   Statement(s) to be executed if expression is true </span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if [ expression 1 ]</span><br><span class="line">then</span><br><span class="line">   Statement(s) to be executed if expression 1 is true</span><br><span class="line">elif [ expression 2 ]</span><br><span class="line">then</span><br><span class="line">   Statement(s) to be executed if expression 2 is true</span><br><span class="line">elif [ expression 3 ]</span><br><span class="line">then</span><br><span class="line">   Statement(s) to be executed if expression 3 is true</span><br><span class="line">else</span><br><span class="line">   Statement(s) to be executed if no expression is true</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>紧凑形式： <code>; </code> (同一行上多个命令的分隔符)</p>
<p>example:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span> </span><br><span class="line">. ~/.bashrc <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">read -p &quot;Is this morning? Please answer yes or no: &quot; answer</span><br><span class="line">if [ &quot;$answer&quot; = &quot;yes&quot; ]; then</span><br><span class="line"> echo “Good morning”</span><br><span class="line">elif [ &quot;$answer&quot; = &quot;no&quot; ]; then</span><br><span class="line"> echo “Good afternoon” </span><br><span class="line">else</span><br><span class="line"> echo “Sorry, $answer not recognized. Enter yes or no”</span><br><span class="line"> exit 1 </span><br><span class="line">fi</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<h3 id="case"><a class="header-anchor" href="#case"></a>case</h3>
<p>syntax:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">case word in</span><br><span class="line">   pattern1 | pattern2)</span><br><span class="line">      Statement(s) to be executed if pattern1 matches</span><br><span class="line">      ;;</span><br><span class="line">   pattern3)</span><br><span class="line">      Statement(s) to be executed if pattern2 matches</span><br><span class="line">      ;;</span><br><span class="line">   pattern4)</span><br><span class="line">      Statement(s) to be executed if pattern3 matches</span><br><span class="line">      ;;</span><br><span class="line">   *)</span><br><span class="line">     Default condition to be executed</span><br><span class="line">     ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">option=&quot;$&#123;1&#125;&quot; </span><br><span class="line">case $&#123;option&#125; in </span><br><span class="line">   -f) FILE=&quot;$&#123;2&#125;&quot; </span><br><span class="line">      echo &quot;File name is $FILE&quot;</span><br><span class="line">      ;; </span><br><span class="line">   -d) DIR=&quot;$&#123;2&#125;&quot; </span><br><span class="line">      echo &quot;Dir name is $DIR&quot;</span><br><span class="line">      ;; </span><br><span class="line">   *)  </span><br><span class="line">      echo &quot;`basename $&#123;0&#125;`:usage: [-f file] | [-d directory]&quot; </span><br><span class="line">      exit 1 # Command to come out of the program with status 1</span><br><span class="line">      ;; </span><br><span class="line">esac </span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">read -p &quot;Is this morning? Please answer yes or no.&quot; answer</span><br><span class="line">case &quot;$answer&quot; in</span><br><span class="line">    yes | y | Yes | YES) </span><br><span class="line">        echo “Good morning!” </span><br><span class="line">        ;; </span><br><span class="line">    no | n | No | NO) </span><br><span class="line">        echo “Good afternoon!” </span><br><span class="line">        ;; </span><br><span class="line">    *)</span><br><span class="line">        echo “Sorry, $answer not recognized.” </span><br><span class="line">        ;;</span><br><span class="line">esac </span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<h3 id="select-in-case-in"><a class="header-anchor" href="#select-in-case-in"></a>select in &amp;&amp; case in</h3>
<p>select in语句自带循环</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select variable in value_list</span><br><span class="line">do</span><br><span class="line">  statements</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<ul>
<li>variable: 表示变量</li>
<li>value_list:  取值列表</li>
<li>in:  Shell关键字</li>
</ul>
<p><strong>select in 通常和 case in 一起使用，在用户输入不同的编号时可以做出不同的反应</strong></p>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">clear</span><br><span class="line">select item in Continue Finish</span><br><span class="line">do</span><br><span class="line">    case &quot;$item&quot; in</span><br><span class="line">    Continue) </span><br><span class="line">        ;;</span><br><span class="line">    Finish) </span><br><span class="line">        break </span><br><span class="line">        ;;</span><br><span class="line">    *) </span><br><span class="line">        echo &quot;Wrong choice! Please select again!&quot; </span><br><span class="line">        ;;</span><br><span class="line">    esac </span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>该命令的while版本：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">while [ &quot;$item&quot; != &quot;Finish&quot; ]; </span><br><span class="line">do </span><br><span class="line">    read item</span><br><span class="line">    case &quot;$item&quot; in</span><br><span class="line">        &quot;Continue&quot;) </span><br><span class="line">            ;;</span><br><span class="line">        &quot;Finish&quot;)</span><br><span class="line">            ;;</span><br><span class="line">        *) echo &quot;Wrong choice! Please select again!&quot;</span><br><span class="line">            ;;</span><br><span class="line">    esac </span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h2 id="循环语句"><a class="header-anchor" href="#循环语句"></a>循环语句</h2>
<h3 id="for"><a class="header-anchor" href="#for"></a>for</h3>
<p>syntax：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">for var in word1 word2 ... wordN</span><br><span class="line">do</span><br><span class="line">   Statement(s) to be executed for every word.</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">for FILE in $HOME/.bash*</span><br><span class="line">do</span><br><span class="line">   echo $FILE</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">for f in *.png             </span><br><span class="line">do</span><br><span class="line">	mv -n $f $f.kk</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h3 id="while"><a class="header-anchor" href="#while"></a>while</h3>
<p>syntax:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">while condition </span><br><span class="line">do</span><br><span class="line">	statements </span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">quit=n</span><br><span class="line">while [ &quot;$quit&quot; != &quot;y&quot; ]; do read menu_choice</span><br><span class="line">case &quot;$menu_choice&quot; in</span><br><span class="line">a) echo &quot;a, continue...&quot;;;</span><br><span class="line">b) echo &quot;b, continue...&quot;;;</span><br><span class="line">q|Q) quit=y;;</span><br><span class="line">*) echo &quot;Sorry, choice not recognized.&quot;;;</span><br><span class="line">esac done</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">a=0</span><br><span class="line">LIMIT=10</span><br><span class="line">while [ $a -le $LIMIT ] </span><br><span class="line">do</span><br><span class="line">    a=$(($a+1))</span><br><span class="line">        if [ $a -gt 2 ] </span><br><span class="line">        then</span><br><span class="line">            break # Skip entire rest of loop. </span><br><span class="line">        fi</span><br><span class="line">    echo -n &quot;$a&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h2 id="命令组合"><a class="header-anchor" href="#命令组合"></a>命令组合</h2>
<p>分号串联：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">command1 ; command2 ; ...</span><br></pre></td></tr></table></figure>
<p>条件组合:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">statement1 &amp;&amp; statement2 &amp;&amp; statement3 &amp;&amp; ...</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">statement1 || statement2 || statement3 ||</span><br></pre></td></tr></table></figure>
<h2 id="语句块"><a class="header-anchor" href="#语句块"></a>语句块</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	statement1 </span><br><span class="line">	statement2 </span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; </span><br><span class="line">	statement1; statement2 ; ... ; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="I-O-redirection"><a class="header-anchor" href="#I-O-redirection"></a>I/O redirection</h2>
<p>一般情况下，每个 Linux 命令运行时都会打开三个文件：</p>
<ul>
<li>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li>
<li>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li>
<li>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息</li>
</ul>
<ul>
<li>
<p>Discard the output</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; /dev/null</span></span><br></pre></td></tr></table></figure>
<p>The file <strong>/dev/null</strong> is a special file that automatically <strong>discards all its input</strong>.</p>
</li>
<li>
<p>Discard both output of a command and its error output,</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; /dev/null 2&gt;&amp;1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>a command normally writes its output to <strong>STDOUT</strong></li>
<li>use standard redirection to redirect <strong>STDERR</strong> to <strong>STDOUT</strong></li>
<li>这里<code>2&gt;&amp;1</code>将标准错误（2）合并到标准输出（1）， 而标准输出已经被重定向到了<code>/dev/null</code>, 因此总体效果是，标准错误和输出都被重定向到了<code>/dev/null</code></li>
</ul>
</li>
<li>
<p>file descriptor:</p>
<ul>
<li><strong>0</strong> : STDIN</li>
<li><strong>1</strong>: STDOUT</li>
<li><strong>2</strong>: STDERR</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"><a target="_blank" rel="noopener" href="http://Sr.No">Sr.No</a>.</th>
<th style="text-align:center">Command &amp; Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><strong>pgm &gt; file</strong><br>Output of pgm is redirected to file<br>会覆盖目标文件中原有的数据</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><strong>pgm &lt; file</strong><br>Program pgm reads its input from file</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><strong>pgm &gt;&gt; file</strong><br>Output of pgm is appended to file</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"><strong>n &gt; file</strong><br>Output from stream with descriptor <strong>n</strong> redirected to file</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center"><strong>n &gt;&gt; file</strong><br/>Output from stream with descriptor <strong>n</strong> appended to file</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center"><strong>n &gt;&amp; m</strong><br/>Merges output from stream <strong>n</strong> with stream <strong>m</strong></td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center"><strong>n &lt;&amp; m</strong><br/>Merges input from stream <strong>n</strong> with stream <strong>m</strong></td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center"><strong>&lt;&lt; tag</strong><br/>Standard input comes from here through next tag at the start of line</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center"><strong>|</strong><br/>Takes output from one program, or process, and sends it to another</td>
</tr>
</tbody>
</table>
<h3 id="Here-Document"><a class="header-anchor" href="#Here-Document"></a>Here Document</h3>
<p>Here Document 目前没有统一的翻译，这里暂译为”嵌入文档“。Here Document 是 Shell 中的一种特殊的重定向方式，它的基本的形式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">command &lt;&lt; delimiter</span><br><span class="line">document</span><br><span class="line">delimiter</span><br></pre></td></tr></table></figure>
<p>它的作用是<strong>将两个 delimiter 之间的内容(document) 作为输入传递给 command</strong></p>
<p>注意：</p>
<ul>
<li>结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</li>
<li>开始的delimiter前后的空格会被忽略掉。</li>
</ul>
<p>下面的例子，通过 wc -l 命令计算 document 的行数：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wc -l &lt;&lt; EOF</span><br><span class="line">    This is a simple lookup program</span><br><span class="line">    for good (and bad) restaurants</span><br><span class="line">    in Cape Town.</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>也可将 Here Document 用在脚本中，例如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">cat &lt;&lt; EOF</span><br><span class="line">    This is a simple lookup program</span><br><span class="line">    for good (and bad) restaurants</span><br><span class="line">    in Cape Town.</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h2 id="test"><a class="header-anchor" href="#test"></a>test</h2>
<p>test expression 或 <code>[ expression ]</code></p>
<ul>
<li>
<p><code>[</code> (aka <code>test</code>) command the and <code>[[ ... ]]</code> test construct are used to evaluate expressions</p>
</li>
<li>
<p><code>[</code>是一条命令， 与<code>test</code>等价，大多数shell都支持。在现代的大多数sh实现中，<code>[</code>与<code>test</code>是builtin命令</p>
<ul>
<li><code>[]</code>将其operand直接当作argument</li>
</ul>
</li>
<li>
<p><code>[[</code>，是关键字，许多shell(如ash bsh)并不支持这种方式</p>
<ul>
<li><code>[[]]</code>将其operand进行参数引用，算术扩展和CMD substitution， 不需要手动转义等</li>
</ul>
</li>
</ul>
<p>test expression:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">test 1 -lt 2</span><br><span class="line">echo $?</span><br><span class="line">0</span><br><span class="line">test 1 -gt 2</span><br><span class="line">echo $?</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p><code>[ expression ]</code>:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &quot;Starting program at $(date)&quot; # Date will be substituted</span><br><span class="line"></span><br><span class="line">echo &quot;Running program $0 with $# arguments with pid $$&quot;</span><br><span class="line"></span><br><span class="line">for file in &quot;$@&quot;; do</span><br><span class="line">    grep foobar &quot;$file&quot; &gt; /dev/null 2&gt; /dev/null</span><br><span class="line">    # When pattern is not found, grep has exit status 1</span><br><span class="line">    # We redirect STDOUT and STDERR to a null register since we do not care about them</span><br><span class="line">    if [[ $? -ne 0 ]]; then</span><br><span class="line">        echo &quot;File $file does not have any foobar, adding one&quot;</span><br><span class="line">        echo &quot;# foobar&quot; &gt;&gt; &quot;$file&quot;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h3 id="与文件有关的条件测试"><a class="header-anchor" href="#与文件有关的条件测试"></a>与文件有关的条件测试</h3>
<p>文件测试运算符的形式及功能</p>
<table>
<thead>
<tr>
<th>option</th>
<th>parameter</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr>
<td>-r</td>
<td>文件名</td>
<td>如文件存在并且是用户可读的，则测试条件为真</td>
</tr>
<tr>
<td>-w</td>
<td>文件名</td>
<td>如文件存在并且是用户可写的，则测试条件为真</td>
</tr>
<tr>
<td>-x</td>
<td>文件名</td>
<td>如文件存在并且是用户可执行的，则测试条件为真</td>
</tr>
<tr>
<td>-f</td>
<td>文件名</td>
<td>如文件存在并且是普通文件，则测试条件为真</td>
</tr>
<tr>
<td>-d</td>
<td>文件名</td>
<td>如文件存在并且是目录文件，则测试条件为真</td>
</tr>
<tr>
<td>-p</td>
<td>文件名</td>
<td>如文件存在并且是命名的FIFO文件，则测试条件为真</td>
</tr>
<tr>
<td>-b</td>
<td>文件名</td>
<td>如文件存在并且是块特殊文件，则测试条件为真</td>
</tr>
<tr>
<td>-c</td>
<td>文件名</td>
<td>如文件存在并且是字符特殊文件，则测试条件为真</td>
</tr>
<tr>
<td>-s</td>
<td>文件名</td>
<td>如文件存在并且文件长度大于0，则测试条件为真</td>
</tr>
<tr>
<td>-t</td>
<td>文件描述符</td>
<td>如文件被打开且文件描述符是与终端设备相关的，则测试条件为真，默认文件描述符是1</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="字符串测试"><a class="header-anchor" href="#字符串测试"></a>字符串测试</h3>
<table>
<thead>
<tr>
<th>option</th>
<th>parameter</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr>
<td>-z</td>
<td>s1</td>
<td>如果字符串s1的长度为0，则测试条件为真</td>
</tr>
<tr>
<td>-n</td>
<td>s1</td>
<td>如果字符串s1的长度大于0，则测试条件为真</td>
</tr>
<tr>
<td></td>
<td>s1</td>
<td>如果字符串s1不是空字符串，则测试条件为真</td>
</tr>
<tr>
<td>=或==</td>
<td>s1=s2</td>
<td>如果s1等于s2，则测试条件为真,“=”前后应有空格</td>
</tr>
<tr>
<td>!=</td>
<td>s1!=s2</td>
<td>如果s1不等于s2，则测试条件为真</td>
</tr>
<tr>
<td>&lt;</td>
<td>s1&lt;s2</td>
<td>如果按字典顺序s1在s2之前，则测试条件为真</td>
</tr>
<tr>
<td>&gt;</td>
<td>s1&gt;s2</td>
<td>如果按自定顺序s1在s2之后，则测试条件为真</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="数值测试"><a class="header-anchor" href="#数值测试"></a>数值测试</h3>
<table>
<thead>
<tr>
<th>parameter</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr>
<td>n1 -eq n2</td>
<td>如果整数n1等于n2，则测试条件为真</td>
</tr>
<tr>
<td>n1 -ne n2</td>
<td>如果整数n1不等于n2，则测试条件为真</td>
</tr>
<tr>
<td>n1 -lt n2</td>
<td>如果如果n1小于n2,则测试条件为真</td>
</tr>
<tr>
<td>n1 -le n2</td>
<td>如果如果n1小于或等于n2,则测试条件为真</td>
</tr>
<tr>
<td>n1 -gt n2</td>
<td>如果n1大于n2,则测试条件为真</td>
</tr>
<tr>
<td>n1 -ge n2</td>
<td>如果n1大于或等于n2,则测试条件为真</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="逻辑操作"><a class="header-anchor" href="#逻辑操作"></a>逻辑操作</h3>
<table>
<thead>
<tr>
<th>parameter</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr>
<td>! expr</td>
<td>逻辑表达式求反</td>
</tr>
<tr>
<td>expr1 –a expr2</td>
<td>两个逻辑表达式“And“</td>
</tr>
<tr>
<td>expr1 –o expr2</td>
<td>两个逻辑表达式“Or“</td>
</tr>
</tbody>
</table>
<h2 id="Function"><a class="header-anchor" href="#Function"></a>Function</h2>
<p>syntax</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">function_name()&#123;</span><br><span class="line">	list of commands</span><br><span class="line">	[ return value ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mcd () &#123;</span><br><span class="line">    mkdir -p &quot;$1&quot;</span><br><span class="line">    cd &quot;$1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="return-code"><a class="header-anchor" href="#return-code"></a>return code</h3>
<ul>
<li><code>exit</code>: 不仅会退出函数，还会退出执行该函数的shell</li>
<li><code>return code</code>:仅仅退出函数。和command的return code同</li>
</ul>
<h3 id="Function-Call-from-Prompt"><a class="header-anchor" href="#Function-Call-from-Prompt"></a>Function Call from Prompt</h3>
<ul>
<li>
<p>令shell加载函数定义：</p>
<ul>
<li>
<p>可以将函数定义在主目录下的<code>.profile</code>，这样每次登陆后，在命令提示符后面输入函数名字就可以立即调用:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">func para1 para2</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>将函数定义写在一个文件( say <code>test.sh</code> ), 然后执行它</p>
</li>
</ul>
</li>
<li>
<p>令shell删除函数定义：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unset -f function_name</span><br></pre></td></tr></table></figure>
<ul>
<li>该命令也可用来令shell删除变量定义</li>
<li>反之，<code>set</code>可以用来定义变量</li>
</ul>
</li>
</ul>
<h2 id="output"><a class="header-anchor" href="#output"></a>output</h2>
<ul>
<li>Commands will often return output using <code>STDOUT</code>, errors through <code>STDERR</code></li>
</ul>
<h2 id="return-code-2"><a class="header-anchor" href="#return-code-2"></a>return code</h2>
<ul>
<li>Commands have <strong>Return Code</strong> to report errors in a more script-friendly manner.
<ul>
<li><strong>0 usually means everything went OK</strong>; anything different from 0 means an error occurred.</li>
<li><code>return code</code>， 你可以指定返回任何值</li>
</ul>
</li>
</ul>
<h2 id="return-code-as-bool-value"><a class="header-anchor" href="#return-code-as-bool-value"></a>return code as bool value</h2>
<ul>
<li>
<p>Return codes can be used to conditionally execute commands using <code>&amp;&amp;</code> (and operator) and <code>||</code> (or operator) .</p>
</li>
<li>
<p>Commands can also be separated within the same line using a semicolon <code>;</code>.</p>
</li>
<li>
<p>The <code>true</code> program will always have a <strong>0</strong> return code and the <code>false</code> command will always have a 1 return code.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">false || echo &quot;Oops, fail&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Oops, fail</span></span><br><span class="line"></span><br><span class="line">true || echo &quot;Will not be printed&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"></span></span><br><span class="line">true &amp;&amp; echo &quot;Things went well&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Things went well</span></span><br><span class="line"></span><br><span class="line">false &amp;&amp; echo &quot;Will not be printed&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"></span></span><br><span class="line">true ; echo &quot;This will always run&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This will always run</span></span><br><span class="line"></span><br><span class="line">false ; echo &quot;This will always run&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This will always run</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="CMD-substitution"><a class="header-anchor" href="#CMD-substitution"></a>CMD substitution</h2>
<ul>
<li>
<p>命令替换: <code>$(CMD)</code>执行命令，并将其输出作为一个变量</p>
<ul>
<li>For example, if you do ``, the shell will first call <code>ls</code> and then iterate over those values.</li>
</ul>
</li>
</ul>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">for file in $(ls)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">echo &quot;The current directory is $PWD&quot;</span><br><span class="line">echo &quot;The current directory is $(pwd)&quot;</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<h2 id="arithmetic-substitution"><a class="header-anchor" href="#arithmetic-substitution"></a>arithmetic substitution</h2>
<p><code>$((...))</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">x=0</span><br><span class="line">while [[ $x != 10 ]]; do</span><br><span class="line">echo $x</span><br><span class="line">x=$(($x+1)) </span><br><span class="line">done</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<h2 id="variable-substitution"><a class="header-anchor" href="#variable-substitution"></a>variable substitution</h2>
<p>变量替换可以根据变量的状态（是否为空、是否定义等）来改变它的值</p>
<p>可以使用的变量替换形式：</p>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>${var}</td>
<td>变量本来的值</td>
</tr>
<tr>
<td>${var:-word}</td>
<td>如果变量 var 为空或已被删除(unset)，那么返回 word，但不改变 var 的值。</td>
</tr>
<tr>
<td>${var:=word}</td>
<td>如果变量 var 为空或已被删除(unset)，那么返回 word，并将 var 的值设置为 word。</td>
</tr>
<tr>
<td>${var:?message}</td>
<td>如果变量 var 为空或已被删除(unset)，那么将消息 message 送到标准错误输出，可以用来检测变量 var 是否可以被正常赋值。 若此替换出现在Shell脚本中，那么脚本将停止运行。</td>
</tr>
<tr>
<td>${var:+word}</td>
<td>如果变量 var 被定义，那么返回 word，但不改变 var 的值。</td>
</tr>
</tbody>
</table>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">echo $&#123;var:-&quot;Variable is not set&quot;&#125;</span><br><span class="line">echo &quot;1 - Value of var is $&#123;var&#125;&quot;</span><br><span class="line"></span><br><span class="line">echo $&#123;var:=&quot;Variable is not set&quot;&#125;</span><br><span class="line">echo &quot;2 - Value of var is $&#123;var&#125;&quot;</span><br><span class="line"></span><br><span class="line">unset var</span><br><span class="line">echo $&#123;var:+&quot;This is default value&quot;&#125;</span><br><span class="line">echo &quot;3 - Value of var is $var&quot;</span><br><span class="line"></span><br><span class="line">var=&quot;Prefix&quot;</span><br><span class="line">echo $&#123;var:+&quot;This is default value&quot;&#125;</span><br><span class="line">echo &quot;4 - Value of var is $var&quot;</span><br><span class="line"></span><br><span class="line">echo $&#123;var:?&quot;Print this message&quot;&#125;</span><br><span class="line">echo &quot;5 - Value of var is $&#123;var&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>result:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Variable is not set</span><br><span class="line">1 - Value of var is</span><br><span class="line">Variable is not set</span><br><span class="line">2 - Value of var is Variable is not set</span><br><span class="line"></span><br><span class="line">3 - Value of var is</span><br><span class="line">This is default value</span><br><span class="line">4 - Value of var is Prefix</span><br><span class="line">Prefix</span><br><span class="line">5 - Value of var is Prefix</span><br></pre></td></tr></table></figure>
<h2 id="process-substitution"><a class="header-anchor" href="#process-substitution"></a>process substitution</h2>
<ul>
<li>
<p><code>&lt;( CMD )</code> ： 执行 <code>CMD</code> 并将其输出重定向到一个临时文件， 用这个临时文件的名字替换 <code>&lt;()</code></p>
<ul>
<li>
<p>This is useful when commands expect values to be passed by file instead of by STDIN.</p>
</li>
<li>
<p>For example, <code>diff &lt;(ls foo) &lt;(ls bar)</code> will show differences between files in dirs <code>foo</code> and <code>bar</code>.</p>
</li>
</ul>
</li>
</ul>
<h2 id="operator"><a class="header-anchor" href="#operator"></a>operator</h2>
<p>Bourne shell didn't originally have any mechanism to perform simple arithmetic operations but it uses external programs, either <strong>awk</strong> or <strong>expr</strong>.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">val=`expr 2 + 2`</span><br><span class="line">echo &quot;Total value : $val&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>There must be spaces between operators and expressions.
<ul>
<li><code>2+2</code> ： wrong</li>
<li><code>2 + 2</code> ： right</li>
</ul>
</li>
<li>all the conditional expressions should be inside square braces with spaces around them
<ul>
<li><code>[$a==$b]</code> or <code>[$a &lt;= $b]</code>: wrong</li>
<li><code>[ $a == $b ]</code> or <code>[ $a &lt;= $b ]</code>: right</li>
</ul>
</li>
<li>When performing <strong>comparison</strong>s in bash, try to use double brackets <code>[[ ]]</code> in favor of simple brackets <code>[ ]</code></li>
<li>因为表达式要先执行，因此它必须被包裹在backquote内</li>
</ul>
<h3 id="Arithmetic-Operators"><a class="header-anchor" href="#Arithmetic-Operators"></a>Arithmetic Operators</h3>
<p>Assume variable <strong>a</strong> holds 10 and variable <strong>b</strong> holds 20 then −</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operator</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+ (Addition)</td>
<td style="text-align:center">Adds values on either side of the operator</td>
<td style="text-align:center"><code>expr $a + $b</code> will give 30</td>
</tr>
<tr>
<td style="text-align:center">- (Subtraction)</td>
<td style="text-align:center">Subtracts right hand operand from left hand operand</td>
<td style="text-align:center"><code>expr $a - $b</code> will give -10</td>
</tr>
<tr>
<td style="text-align:center">* (Multiplication)</td>
<td style="text-align:center">Multiplies values on either side of the operator</td>
<td style="text-align:center"><code>expr $a \* $b</code> will give 200</td>
</tr>
<tr>
<td style="text-align:center">/ (Division)</td>
<td style="text-align:center">Divides left hand operand by right hand operand</td>
<td style="text-align:center"><code>expr $b / $a</code> will give 2</td>
</tr>
<tr>
<td style="text-align:center">% (Modulus)</td>
<td style="text-align:center">Divides left hand operand by right hand operand and returns remainder</td>
<td style="text-align:center"><code>expr $b % $a</code> will give 0</td>
</tr>
<tr>
<td style="text-align:center">= (Assignment)</td>
<td style="text-align:center">Assigns right operand in left operand</td>
<td style="text-align:center">a = $b would assign value of b into a</td>
</tr>
<tr>
<td style="text-align:center">== (Equality)</td>
<td style="text-align:center">Compares two numbers, if both are same then returns true.</td>
<td style="text-align:center">[ $a == $b ] would return false.</td>
</tr>
<tr>
<td style="text-align:center">!= (Not Equality)</td>
<td style="text-align:center">Compares two numbers, if both are different then returns true.</td>
<td style="text-align:center">[ $a != $b ] would return true.</td>
</tr>
</tbody>
</table>
<ul>
<li>All the arithmetical calculations are done using long <strong>integers</strong>.</li>
</ul>
<h3 id="Relational-Operators"><a class="header-anchor" href="#Relational-Operators"></a>Relational Operators</h3>
<p>These operators do not work for <strong>string</strong> values <strong>unless their value is numeric</strong>.</p>
<ul>
<li>For example, following operators will work to check a relation between 10 and 20 as well as in between &quot;10&quot; and &quot;20&quot; but not in between &quot;ten&quot; and &quot;twenty&quot;.</li>
</ul>
<p>Assume variable <strong>a</strong> holds 10 and variable <strong>b</strong> holds 20 then −</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operator</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>-eq</strong></td>
<td style="text-align:center">Checks if the value of two operands are equal or not; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ $a -eq $b ] is not true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-ne</strong></td>
<td style="text-align:center">Checks if the value of two operands are equal or not; if values are not equal, then the condition becomes true.</td>
<td style="text-align:center">[ $a -ne $b ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-gt</strong></td>
<td style="text-align:center">Checks if the value of left operand is greater than the value of right operand; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ $a -gt $b ] is not true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-lt</strong></td>
<td style="text-align:center">Checks if the value of left operand is less than the value of right operand; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ $a -lt $b ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-ge</strong></td>
<td style="text-align:center">Checks if the value of left operand is greater than or equal to the value of right operand; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ $a -ge $b ] is not true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-le</strong></td>
<td style="text-align:center">Checks if the value of left operand is less than or equal to the value of right operand; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ $a -le $b ] is true.</td>
</tr>
</tbody>
</table>
<h3 id="Boolean-Operators"><a class="header-anchor" href="#Boolean-Operators"></a>Boolean Operators</h3>
<p>The following Boolean operators are supported by the Bourne Shell.</p>
<p>Assume variable <strong>a</strong> holds 10 and variable <strong>b</strong> holds 20 then −</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operator</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>!</strong></td>
<td style="text-align:center">This is logical negation. This inverts a true condition into false and vice versa.</td>
<td style="text-align:center">[ ! false ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-o</strong></td>
<td style="text-align:center">This is logical <strong>OR</strong>. If one of the operands is true, then the condition becomes true.</td>
<td style="text-align:center">[ $a -lt 20 -o $b -gt 100 ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-a</strong></td>
<td style="text-align:center">This is logical <strong>AND</strong>. If both the operands are true, then the condition becomes true otherwise false.</td>
<td style="text-align:center">[ $a -lt 20 -a $b -gt 100 ] is false.</td>
</tr>
</tbody>
</table>
<h3 id="String-Operators"><a class="header-anchor" href="#String-Operators"></a>String Operators</h3>
<p>The following string operators are supported by Bourne Shell.</p>
<p>Assume variable <strong>a</strong> holds &quot;abc&quot; and variable <strong>b</strong> holds &quot;efg&quot; then −</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operator</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>=</strong></td>
<td style="text-align:center">Checks if the value of two operands are equal or not; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ $a = $b ] is not true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>!=</strong></td>
<td style="text-align:center">Checks if the value of two operands are equal or not; if values are not equal then the condition becomes true.</td>
<td style="text-align:center">[ $a != $b ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-z</strong></td>
<td style="text-align:center">Checks if the given string operand size is zero; if it is zero length, then it returns true.</td>
<td style="text-align:center">[ -z $a ] is not true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-n</strong></td>
<td style="text-align:center">Checks if the given string operand size is non-zero; if it is nonzero length, then it returns true.</td>
<td style="text-align:center">[ -n $a ] is not false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>str</strong></td>
<td style="text-align:center">Checks if <strong>str</strong> is not the empty string; if it is empty, then it returns false.</td>
<td style="text-align:center">[ $a ] is not false.</td>
</tr>
</tbody>
</table>
<h3 id="File-Test-Operators"><a class="header-anchor" href="#File-Test-Operators"></a>File Test Operators</h3>
<p>We have a few operators that can be used to test various properties associated with a Unix file.</p>
<p>Assume a variable <strong>file</strong> holds an existing file name &quot;test&quot; the size of which is 100 bytes and has <strong>read</strong>, <strong>write</strong> and <strong>execute</strong> permission on −</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operator</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>-b file</strong></td>
<td style="text-align:center">Checks if file is a block special file; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -b $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-c file</strong></td>
<td style="text-align:center">Checks if file is a character special file; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -c $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-d file</strong></td>
<td style="text-align:center">Checks if file is a directory; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -d $file ] is not true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-f file</strong></td>
<td style="text-align:center">Checks if file is an ordinary file as opposed to a directory or special file; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -f $file ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-g file</strong></td>
<td style="text-align:center">Checks if file has its set group ID (SGID) bit set; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -g $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-k file</strong></td>
<td style="text-align:center">Checks if file has its sticky bit set; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -k $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-p file</strong></td>
<td style="text-align:center">Checks if file is a named pipe; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -p $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-t file</strong></td>
<td style="text-align:center">Checks if file descriptor is open and associated with a terminal; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -t $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-u file</strong></td>
<td style="text-align:center">Checks if file has its Set User ID (SUID) bit set; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -u $file ] is false.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-r file</strong></td>
<td style="text-align:center">Checks if file is readable; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -r $file ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-w file</strong></td>
<td style="text-align:center">Checks if file is writable; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -w $file ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-x file</strong></td>
<td style="text-align:center">Checks if file is executable; if yes, then the condition becomes true.</td>
<td style="text-align:center">[ -x $file ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-s file</strong></td>
<td style="text-align:center">Checks if file has size greater than 0; if yes, then condition becomes true.</td>
<td style="text-align:center">[ -s $file ] is true.</td>
</tr>
<tr>
<td style="text-align:center"><strong>-e file</strong></td>
<td style="text-align:center">Checks if file exists; is true even if file is a directory but exists.</td>
<td style="text-align:center">[ -e $file ] is true.</td>
</tr>
</tbody>
</table>
<h2 id="shell-globbing"><a class="header-anchor" href="#shell-globbing"></a>shell globbing</h2>
<ul>
<li>
<p>一些正则操作，用于文件名扩展</p>
</li>
<li>
<p>Wildcards:</p>
<ul>
<li>
<p><code>?</code>: match <strong>one</strong> character</p>
</li>
<li>
<p><code>*</code>:  match <strong>any</strong> amount of characters</p>
</li>
<li>
<p>For instance, given files <code>foo</code>, <code>foo1</code>, <code>foo2</code>, <code>foo10</code> and <code>bar</code>, the command <code>rm foo?</code> will delete <code>foo1</code> and <code>foo2</code> whereas <code>rm foo*</code> will delete all but <code>bar</code>.</p>
</li>
</ul>
</li>
<li>
<p>Curly braces <code>&#123;&#125;</code> -  相当于笛卡尔积：  <code>a.&#123;py,cpp,java&#125;</code>等价于 <code>a.py a.cpp a.java</code></p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">convert image.&#123;png,jpg&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Will <span class="built_in">expand</span> to</span></span><br><span class="line">convert image.png image.jpg</span><br><span class="line"></span><br><span class="line">cp /path/to/project/&#123;foo,bar,baz&#125;.sh /newpath</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Will <span class="built_in">expand</span> to</span></span><br><span class="line">cp /path/to/project/foo.sh /path/to/project/bar.sh /path/to/project/baz.sh /newpath</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Globbing techniques can also be combined</span></span><br><span class="line">mv *&#123;.py,.sh&#125; folder</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Will move all *.py and *.sh files</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir foo bar</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This creates files foo/a, foo/b, ... foo/h, bar/a, bar/b, ... bar/h</span></span><br><span class="line">touch &#123;foo,bar&#125;/&#123;a..h&#125;</span><br><span class="line">touch foo/x bar/y</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Show differences between files <span class="keyword">in</span> foo and bar</span></span><br><span class="line">diff &lt;(ls foo) &lt;(ls bar)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Outputs</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt; x</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">---</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt; y</span></span><br></pre></td></tr></table></figure>
<h2 id="env-virable"><a class="header-anchor" href="#env-virable"></a>env virable</h2>
<p>使用 export 设置的变量就成为了环境变量，而没有使用 export 设置的则是自定义变量</p>
<table>
<thead>
<tr>
<th>环境变量</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$HOME</td>
<td>当前用户的登陆目录</td>
</tr>
<tr>
<td>$PATH</td>
<td>以冒号分隔的用来搜索命令的目录的列表</td>
</tr>
<tr>
<td>$PS1</td>
<td>命令行提示符，通常是”$”字符 (很多主题都会改掉$PS1)</td>
</tr>
<tr>
<td>$PS2</td>
<td>辅助提示符，用来提示后续输入，通常是”&gt;”字符</td>
</tr>
<tr>
<td>$IFS</td>
<td>输入区分隔符。当shell读取输入数据时会把一组字符看成是单词之间的分隔符，通常是空格、制</td>
</tr>
<tr>
<td></td>
<td>表符、换行符等</td>
</tr>
</tbody>
</table>
<h2 id="parameter-variable"><a class="header-anchor" href="#parameter-variable"></a>parameter variable</h2>
<ul>
<li><code>$0</code> - Name of the script</li>
<li><code>$1</code> to <code>$9</code> - Arguments to the script. <code>$1</code> is the first argument and so on.
<ul>
<li>当<code>n&gt;=10</code>时，需要使用$<code>&#123;n&#125;</code>来获取参数</li>
</ul>
</li>
<li><code>$@</code> - 全部参数组成的列表</li>
<li><code>$#</code> - Number of arguments</li>
<li><code>$?</code> - Return code of the previous command</li>
<li><code>$*</code>： 全部参数连接成的字符串，按<code>$IFS</code>的第一个字符分割</li>
<li><code>$$</code> - Process identification number (PID) for the current script</li>
<li><code>!!</code> - <strong>Entire last command</strong>, including arguments. A common pattern is to execute a command only for it to fail due to missing permissions; you can quickly re-execute the command with sudo by doing <code>sudo !!</code></li>
<li><code>$_</code> - Last argument from the last command. If you are in an interactive shell, you can also quickly get this value by typing <code>Esc</code> followed by <code>.</code> or <code>Alt+.</code></li>
</ul>
<p><code>$PATH</code> 是由多个路径所组成的，并且用冒号进行了分隔</p>
<p>环境变量可以在其进程的子进程中继续有效，而自定义变量则无效</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">我们在当前Shell进程中指定了var1变量</span></span><br><span class="line">[roc@roclinux ~]$ var1=&quot;hello&quot;</span><br><span class="line">[roc@roclinux ~]$ echo $var1</span><br><span class="line">hello</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">我们在当前Shell进程中又指定了var2变量</span></span><br><span class="line">[roc@roclinux ~]$ var2=&quot;world&quot;</span><br><span class="line">[roc@roclinux ~]$ echo $var2</span><br><span class="line">world</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">我们通过<span class="built_in">export</span>发布var1</span></span><br><span class="line">[roc@roclinux ~]$ export var1</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">我们进入到一个bash子进程中</span></span><br><span class="line">[roc@roclinux ~]$ bash</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">var1变量仍然有效, 而var2变量已经无效了</span></span><br><span class="line">[roc@roclinux ~]$ echo $var1 # 输出变量的值</span><br><span class="line">hello</span><br><span class="line">[roc@roclinux ~]$ echo $var2  # 什么也没有输出</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=$PATH:/home/to/operation_tools</span><br></pre></td></tr></table></figure>
<ul>
<li>声明环境变量PATH, 值为之前的<code>PATH</code>的值（采用<code>$</code>进行赋值）， 再append <code>:/home/to/operation_tools</code>， 这里要append冒号，因为环境变量之间通过冒号隔开</li>
</ul>
<h2 id="scripts"><a class="header-anchor" href="#scripts"></a>scripts</h2>
<h3 id="shebang"><a class="header-anchor" href="#shebang"></a>shebang</h3>
<p>Note that scripts need not necessarily be written in bash to be called from the terminal. For instance, here’s a simple Python script that outputs its arguments in reversed order:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/local/bin/python</span></span><br><span class="line">import sys</span><br><span class="line">for arg in reversed(sys.argv[1:]):</span><br><span class="line">    print(arg)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>shebang: the character sequence consisting of <code>#!</code> at the beginning of a script in   a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Unix-like">Unix-like</a> operating system</p>
<ul>
<li>
<p>shell会将shebang中<code>#!</code>之后的内容作为一个程序的路径，打开该程序， 将本script的路径当作参数传入（ 即，将整个script当作input传入shebang所指定的程序 ）</p>
</li>
<li>
<p>For example, if a script is named with the path <em>path/to/script</em>, and it starts with the following line, <code>#!/bin/sh</code>, then the program loader is instructed to run the program <em>/bin/sh</em>, passing <em>path/to/script</em> as the first argument. In <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linux">Linux</a>, this behavior is the result of both kernel and user-space code.[<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shebang_(Unix)#cite_note-9">9]</a></p>
</li>
<li>
<p>The shebang line is usually ignored by the interpreter, because the &quot;#&quot; character is a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Comment_(computer_programming)">comment</a> marker in many scripting languages; some language interpreters that do not use the hash mark to begin comments still may ignore the shebang line in recognition of its purpose.</p>
</li>
</ul>
</li>
</ul>
<h3 id="shebang-with-env"><a class="header-anchor" href="#shebang-with-env"></a>shebang with env</h3>
<p>The shebang expects a full path to the interpreter to use so the following syntax would be incorrect:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!python</span></span><br></pre></td></tr></table></figure>
<p>Setting a full path like this might work:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/local/bin/python</span></span><br></pre></td></tr></table></figure>
<p>but would be non portable as python might be installed in <code>/bin</code>, <code>/opt/python/bin</code>, or wherever other location.</p>
<p>Using <code>env</code></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br></pre></td></tr></table></figure>
<p>is a method allowing a portable way to specify to the OS a full path equivalent to the one where <code>python</code> is first located in the <code>PATH</code>.</p>
<h3 id="scripts-vs-shell-functions"><a class="header-anchor" href="#scripts-vs-shell-functions"></a>scripts vs shell functions</h3>
<p>Some differences between shell functions and scripts that you should keep in mind are:</p>
<ul>
<li>Functions have to be in the same language as the shell, while scripts can be written in any language. This is why including a shebang for scripts is important.</li>
<li>Functions are loaded once when their definition is read. Scripts are loaded every time they are executed. This makes functions slightly faster to load, but whenever you change them you will have to reload their definition.</li>
<li>Functions are executed <strong>in the current shell environment</strong>( 可以简单理解为， function的所在路径是当前路径 ) whereas scripts execute in their own process. Thus, functions can modify environment variables, e.g. change your current directory, whereas scripts can’t. Scripts will be passed by value environment variables that have been exported using <a target="_blank" rel="noopener" href="https://www.man7.org/linux/man-pages/man1/export.1p.html"><code>export</code></a></li>
<li>As with any programming language, functions are a powerful construct to achieve modularity, code reuse, and clarity of shell code. Often shell scripts will include their own function definitions.</li>
</ul>
<h3 id="Potpourri"><a class="header-anchor" href="#Potpourri"></a>Potpourri</h3>
<ul>
<li>
<p><code>:</code>： 空命令</p>
</li>
<li>
<p><code>.</code>或<code>source</code>： 在当前shell session中执行脚本， 因此可以用于刷新当前shell环境:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>break: 从for/while/until循环退出</p>
</li>
</ul>
<h3 id=""><a class="header-anchor" href="#"></a></h3>
<h2 id="execute-shell-scripts"><a class="header-anchor" href="#execute-shell-scripts"></a>execute shell scripts</h2>
<ul>
<li>
<p>Shell script是能在命令行直接输入的，但仅会作用一次</p>
</li>
<li>
<p>执行脚本文件：</p>
<ul>
<li>
<p>方法1: 直接指定<code>sh</code>来执行该脚本，不需要shebang，也不需要脚本有执行权限（因为该脚本直接作为参数传给了sh）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sh script_file</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>方法2: 要shebang（指定解释器），要指定脚本路径（<code>./</code>必加）， 否则bash就会在环境变量中查找该脚本名，找不到就报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +x script_file ##(chown, chgrp optionally)</span><br><span class="line">./script_file</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>方法3: 在当前shell session中执行该脚本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source script_file</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">. script_file</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>​</p>
<p>注意，方法1和2都是新开一个子shell session，在其中执行脚本，而方法三是在当前shell session中执行脚本</p>
<h3 id="-2"><a class="header-anchor" href="#-2"></a></h3>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/shell/" rel="tag"># shell</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/02/24/Java-Class/" rel="prev" title="Java Class">
                  <i class="fa fa-chevron-left"></i> Java Class
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/03/19/Dockerizing/" rel="next" title="Dockerizing">
                  Dockerizing <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2021 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">有多远滚多远</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
